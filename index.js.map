{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport const fetchImages = async (searchedQuery, page = 1) => {\n  const params = new URLSearchParams({\n    key: '48414882-2ceb04708685b14a14771b53a',\n    q: searchedQuery,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    page: page,\n    per_page: 15,\n  });\n\n  try {\n    const response = await axios.get(`https://pixabay.com/api/?${params}`);\n    return response.data;\n  } catch (error) {\n    throw new Error(`HTTP error! Status: ${error.response.status}`);\n  }\n};\n\n\n","export const createGalleryItem = (imgInfo) => {\n  return `<li class=\"gallery-item\">\n    <a href=\"${imgInfo.largeImageURL}\" class=\"gallery-link\">\n      <img src=\"${imgInfo.webformatURL}\" alt=\"${imgInfo.tags}\" width=\"360\" class=\"gallery-img\" loading=\"lazy\" />\n    </a>\n    <ul class=\"gallery-list\">\n      <li>\n        <h3>Likes</h3>\n        <p>${imgInfo.likes}</p>\n      </li>\n      <li>\n        <h3>Views</h3>\n        <p>${imgInfo.views}</p>\n      </li>\n      <li>\n        <h3>Comments</h3>\n        <p>${imgInfo.comments}</p>\n      </li>\n      <li>\n        <h3>Downloads</h3>\n        <p>${imgInfo.downloads}</p>\n      </li>\n    </ul>\n  </li>`;\n};\n","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport { fetchImages } from \"./js/pixabay-api.js\";\nimport { createGalleryItem } from \"./js/render-functions.js\";\n\nconst form = document.querySelector(\".search-form\");\nconst galleryContainer = document.querySelector(\".gallery\");\nconst loadMoreBtn = document.querySelector(\".load-more\");\nconst loadingMessage = document.querySelector(\".loading-message\");\n\nlet currentPage = 1;\nlet currentQuery = \"\";\nlet lightbox = new SimpleLightbox(\".gallery a\", {\n  captionsData: \"alt\",\n  captionDelay: 250,\n});\n\nconst loader = document.querySelector(\".loader-container\");\n\nform.addEventListener(\"submit\", async (event) => {\n  event.preventDefault();\n  currentQuery = event.target.query.value.trim();\n  currentPage = 1;\n\n  galleryContainer.innerHTML = \"\";\n  loadMoreBtn.style.display = \"none\";\n  loader.classList.remove(\"loader-off\"); \n\n  if (!currentQuery) {\n    loader.classList.add(\"loader-off\"); \n    iziToast.error({\n      message: \"Please enter a search term.\",\n      position: \"topRight\",\n    });\n    return;\n  }\n\n  try {\n    const data = await fetchImages(currentQuery, currentPage);\n\n    if (data.hits.length === 0) {\n      iziToast.info({\n        message: \"Sorry, there are no images matching your search query.\",\n        position: \"topRight\",\n      });\n      return;\n    }\n\n    renderGallery(data.hits);\n    lightbox.refresh();\n\n    if (data.totalHits > 15) {\n      loadMoreBtn.style.display = \"block\";\n    }\n  } catch (error) {\n    iziToast.error({\n      message: \"Something went wrong. Please try again later.\",\n      position: \"topRight\",\n    });\n  } finally {\n    loader.classList.add(\"loader-off\"); // Приховуємо індикатор\n  }\n});\n\nloadMoreBtn.addEventListener(\"click\", async () => {\n  loadMoreBtn.style.display = \"none\";\n  loadingMessage.style.display = \"block\";\n\n  try {\n    currentPage += 1;\n    const data = await fetchImages(currentQuery, currentPage);\n    renderGallery(data.hits);\n    lightbox.refresh();\n\n    const cardHeight = document\n      .querySelector(\".gallery-item\")\n      .getBoundingClientRect().height;\n    window.scrollBy({\n      top: cardHeight * 2,\n      behavior: \"smooth\",\n    });\n\n    if (currentPage * 15 >= data.totalHits) {\n      iziToast.info({\n        message: \"You've reached the end of search results.\",\n        position: \"topRight\",\n      });\n    } else {\n      loadMoreBtn.style.display = \"block\";\n    }\n  } catch (error) {\n    iziToast.error({\n      message: \"Failed to load more images.\",\n      position: \"topRight\",\n    });\n  } finally {\n    loadingMessage.style.display = \"none\";\n  }\n});\n\nfunction renderGallery(images) {\n  const galleryTemplate = images.map((image) => createGalleryItem(image)).join(\"\");\n  galleryContainer.insertAdjacentHTML(\"beforeend\", galleryTemplate);\n}"],"names":["fetchImages","searchedQuery","page","params","axios","error","createGalleryItem","imgInfo","form","galleryContainer","loadMoreBtn","loadingMessage","currentPage","currentQuery","lightbox","SimpleLightbox","loader","event","iziToast","data","renderGallery","cardHeight","images","galleryTemplate","image"],"mappings":"+vBAEO,MAAMA,EAAc,MAAOC,EAAeC,EAAO,IAAM,CAC5D,MAAMC,EAAS,IAAI,gBAAgB,CACjC,IAAK,qCACL,EAAGF,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAMC,EACN,SAAU,EACd,CAAG,EAED,GAAI,CAEF,OADiB,MAAME,EAAM,IAAI,4BAA4BD,CAAM,EAAE,GACrD,IACjB,OAAQE,EAAO,CACd,MAAM,IAAI,MAAM,uBAAuBA,EAAM,SAAS,MAAM,EAAE,CAC/D,CACH,ECnBaC,EAAqBC,GACzB;AAAA,eACMA,EAAQ,aAAa;AAAA,kBAClBA,EAAQ,YAAY,UAAUA,EAAQ,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA,aAK/CA,EAAQ,KAAK;AAAA;AAAA;AAAA;AAAA,aAIbA,EAAQ,KAAK;AAAA;AAAA;AAAA;AAAA,aAIbA,EAAQ,QAAQ;AAAA;AAAA;AAAA;AAAA,aAIhBA,EAAQ,SAAS;AAAA;AAAA;AAAA,SCbxBC,EAAO,SAAS,cAAc,cAAc,EAC5CC,EAAmB,SAAS,cAAc,UAAU,EACpDC,EAAc,SAAS,cAAc,YAAY,EACjDC,EAAiB,SAAS,cAAc,kBAAkB,EAEhE,IAAIC,EAAc,EACdC,EAAe,GACfC,EAAW,IAAIC,EAAe,aAAc,CAC9C,aAAc,MACd,aAAc,GAChB,CAAC,EAED,MAAMC,EAAS,SAAS,cAAc,mBAAmB,EAEzDR,EAAK,iBAAiB,SAAU,MAAOS,GAAU,CAS/C,GARAA,EAAM,eAAc,EACpBJ,EAAeI,EAAM,OAAO,MAAM,MAAM,KAAI,EAC5CL,EAAc,EAEdH,EAAiB,UAAY,GAC7BC,EAAY,MAAM,QAAU,OAC5BM,EAAO,UAAU,OAAO,YAAY,EAEhC,CAACH,EAAc,CACjBG,EAAO,UAAU,IAAI,YAAY,EACjCE,EAAS,MAAM,CACb,QAAS,8BACT,SAAU,UAChB,CAAK,EACD,MACD,CAED,GAAI,CACF,MAAMC,EAAO,MAAMnB,EAAYa,EAAcD,CAAW,EAExD,GAAIO,EAAK,KAAK,SAAW,EAAG,CAC1BD,EAAS,KAAK,CACZ,QAAS,yDACT,SAAU,UAClB,CAAO,EACD,MACD,CAEDE,EAAcD,EAAK,IAAI,EACvBL,EAAS,QAAO,EAEZK,EAAK,UAAY,KACnBT,EAAY,MAAM,QAAU,QAE/B,MAAe,CACdQ,EAAS,MAAM,CACb,QAAS,gDACT,SAAU,UAChB,CAAK,CACL,QAAY,CACRF,EAAO,UAAU,IAAI,YAAY,CAClC,CACH,CAAC,EAEDN,EAAY,iBAAiB,QAAS,SAAY,CAChDA,EAAY,MAAM,QAAU,OAC5BC,EAAe,MAAM,QAAU,QAE/B,GAAI,CACFC,GAAe,EACf,MAAMO,EAAO,MAAMnB,EAAYa,EAAcD,CAAW,EACxDQ,EAAcD,EAAK,IAAI,EACvBL,EAAS,QAAO,EAEhB,MAAMO,EAAa,SAChB,cAAc,eAAe,EAC7B,sBAAqB,EAAG,OAC3B,OAAO,SAAS,CACd,IAAKA,EAAa,EAClB,SAAU,QAChB,CAAK,EAEGT,EAAc,IAAMO,EAAK,UAC3BD,EAAS,KAAK,CACZ,QAAS,4CACT,SAAU,UAClB,CAAO,EAEDR,EAAY,MAAM,QAAU,OAE/B,MAAe,CACdQ,EAAS,MAAM,CACb,QAAS,8BACT,SAAU,UAChB,CAAK,CACL,QAAY,CACRP,EAAe,MAAM,QAAU,MAChC,CACH,CAAC,EAED,SAASS,EAAcE,EAAQ,CAC7B,MAAMC,EAAkBD,EAAO,IAAKE,GAAUlB,EAAkBkB,CAAK,CAAC,EAAE,KAAK,EAAE,EAC/Ef,EAAiB,mBAAmB,YAAac,CAAe,CAClE"}